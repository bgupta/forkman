---

# Most uniq patterns should go first
# !!! ORDER IS IMPORTANT !!!
patterns:

  # Keep Original Sites
  # www.habitat.sh: www.habitat.sh
  bldr.habitat.sh: bldr.habitat.sh

  # Keep Original GitHub Issues, PRs, Apps
  github.com/habitat-sh/habitat/issues: github.com/habitat-sh/habitat/issues
  github.com/habitat-sh/habitat/pull: github.com/habitat-sh/habitat/pull
  https://github.com/apps/habitat-builder: https://github.com/apps/habitat-builder

  # Currently don't touch bintray
  # https://api.bintray.com/content/habitat: https://api.bintray.com/content/habitat
  # https://api.bintray.com/packages/habitat: https://api.bintray.com/packages/habitat

  The Habitat Maintainers: The Biome Maintainers
  humans@habitat.sh: humans@biome.sh

  # Github Source
  habitat-sh/rust-zmq: habitat-sh/rust-zmq
  habitat-sh/ipc-channel: habitat-sh/ipc-channel
  habitat-sh/nitox: habitat-sh/nitox
  habitat-sh/core-plans: habitat-sh/core-plans
  https://github.com/habitat-sh/habitat: https://github.com/biome-sh/biome
  https://raw.githubusercontent.com/habitat-sh/habitat/: https://raw.githubusercontent.com/biome-sh/biome/
  'github.com:habitat-sh/habitat': 'github.com:biome-sh/biome'

  # Remove chef licenses checks from OSS Version
  'license::accept_license(ui)?;': ''
  'license::check_for_license_acceptance_and_prompt(ui)?;': ''

  # Translate constants
  pkg_origin=core: pkg_origin=biome
  pkg_name=hab: pkg_name=bio
  pkg_path_for hab: pkg_path_for bio

  habirails: biorails
  core/hab: biome/bio
  core-hab: biome-bio
  core/hab hab: biome/bio bio
  hab --version: bio --version
  hab.exe: bio.exe

  ':habicat:': ':habicat:'
  ':hab:': ':bio:'

  # Make plans use habitat
  habitat/plan.sh: habitat/plan.sh
  habitat/x86_64-darwin/plan.sh: habitat/x86_64-darwin/plan.sh
  habitat/plan.ps1: habitat/plan.ps1
  PLAN_CONTEXT/habitat: PLAN_CONTEXT/habitat
  PLAN_CONTEXT\habitat: PLAN_CONTEXT\\habitat
  rootfs/hab: rootfs/hab
  # from test only
  '            .join("hab")': '            .join("hab")'

  'Path::new(&*FS_ROOT_PATH).join("hab")': 'Path::new(&*FS_ROOT_PATH).join("hab")'
  'rootfs.join("hab")': 'rootfs.join("hab")'
  'HAB_ROOT_PATH:=/hab': 'HAB_ROOT_PATH:=/hab'

  # Prevent multiple substitutions by slighty changing line
  # Add hab user
  'echo "${run_user}:x:42:42:root:/:/bin/sh" >> "$HAB_STUDIO_ROOT"/etc/passwd': |
          echo "${run_user}:x:42:42:root:/:/bin/sh"  >> "$HAB_STUDIO_ROOT"/etc/passwd
          echo "hab:x:43:43:root:/:/bin/sh"  >> "$HAB_STUDIO_ROOT"/etc/passwd

  'echo "${run_group}:x:42:${run_user}" >> "$HAB_STUDIO_ROOT"/etc/group': |
          echo "${run_group}:x:42:${run_user}"  >> "$HAB_STUDIO_ROOT"/etc/group
          echo "hab:x:43:hab"  >> "$HAB_STUDIO_ROOT"/etc/group


  Habitat: Biome
  habitat: biome
  habiat: biome
  Habiat: Biome

  # Make some biome path compatible
  hab/etc: hab/etc
  hab/launcher: hab/launcher
  hab/sup: hab/sup
  hab/svc: hab/svc
  hab/pkgs: hab/pkgs
  hab/cache: hab/cache
  hab/studios: hab/studios

  # Also windows
  hab\etc: hab\\etc
  hab\launcher: hab\\launcher
  hab\sup: hab\\sup
  hab\svc: hab\\svc
  hab\pkgs: hab\\pkgs
  hab\cache: hab\\cache
  hab\studios: hab\\studios

  # Translate all habs beacause
  # Replacing hab -> bio is danger (word `unreachable` will be `unreacbiole` )
  hab/: bio/
  hab\\: bio\\\\

  # Assigments
  =hab: =bio
  hab=: bio=
  '= hab': '= bio'
  'hab =': 'bio ='
  '= "hab"': '= "bio"'

  # Relative path
  ../hab: ../bio
  .hab: .bio

  # String occurances
  '"hab"': '"bio"'
  "'hab'": "'bio'"
  ' hab': ' bio'
  # Not always works somewhy?
  '`hab': '`bio'

  # Variables
  _hab: _bio
  hab_: bio_
  -hab: -bio
  hab-: bio-
  '&hab': '&bio'
  '$hab': '$bio'

  hab/hab: bio/bio
  /hab: /bio
  bin/hab: bin/bio
  'use hab': 'use bio'
  'hab::': 'bio::'

  'hab ': 'bio '
  '$hab': '$bio'
  '${hab}': '${bio}'

  'hab:': 'bio:'
  hab\: bio\\
  \hab: \\bio
  ':hab': ':bio'
  '[hab]': '[bio]'

# Delete some files which safe to ignore
deletes:
  # Temporary
  - www
  - .mailmap
  - .mention-bot
  - CHANGELOG.md

# Excludes from patching contents
excludes:
  - CONTRIBUTING.md
  - MAINTAINERS.md
  - components/core/tests/fixtures/unhappyhumans-possums-8.1.4-20160427165340-x86_64-linux.hart
  - www/source/blog/media/2018-08-18-lift-and-shift-bio/run_tar_ubuntu_vm.png
  - www/source/downloads/bio.gz
  - www/source/downloads/bio.zip
  - www/source/images/infographics/biome-builder-architecture.png
  - www/source/images/homepage/architecture-diagram.png
